<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

	<head>
		<link href="http://gmpg.org/xfn/11" rel="profile">
		<meta charset="utf-8">
		<meta http-equiv="content-type" content="text/html; charset=utf-8">

		
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="The blog/playground for personal amusement">
		<meta name="keywords" content="hugo, blog, terran-x, playground, github">
   		<meta name="author" content="Sheva Xu">

		<title>Having fun with maps</title>

		
		
		
		
		<link href="http://shevaxu.github.io/css/bootstrap.min.css" rel="stylesheet">
		
		
		<link href="//vjs.zencdn.net/4.11/video-js.css" rel="stylesheet">
		
		
		<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
		
		
		
		
		<link href="http://shevaxu.github.io/css/github.css" rel="stylesheet"> 
		
		
		
		<link href="http://shevaxu.github.io/css/clean-blog.min.css" rel="stylesheet">	
		
		<link href="http://shevaxu.github.io/css/terran.css" rel="stylesheet">
		
		
		<link href="http://shevaxu.github.io/img/favicon.png" rel="icon">
	</head>

	<body>
		
		<div class="fixed-img-bg" style="background: url('http://shevaxu.github.io/img/bg.jpg'); background-size: cover;"></div>
		

		
		

<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
	<div class="container-fluid">
		
		<div class="navbar-header page-scroll">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="#">Terran-X</a>
		</div>

		
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav navbar-right">
				<li>					
					<a href="http://shevaxu.github.io"><i class="fa fa-home"></i>Home</a>
				</li>
				<li>
					<a href="http://shevaxu.github.io/post/"><i class="fa fa-file-text"></i>Posts</a>
				</li>
				<li>
					<a href="#"><i class="fa fa-futbol-o"></i>Playground</a>
				</li>
				<li>
					<a href="#"><i class="fa fa-paper-plane"></i>Tools</a>
				</li>
			</ul>
		</div>
		
	</div>
	
</nav>


<header class="intro-header" 
	 style="background-image: url('http://shevaxu.github.io/img/post-bg.jpg')" >
	<div class="container">
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
				<div class="post-heading">
					<h1>Having fun with maps</h1> 
					
					<h2 class="subheading">subtitle</h2> 
					
					<span class="meta">
						Jan 17, 2015  (Jan 17, 2015) 						 
						
						&nbsp; &nbsp; 
						<i class="fa fa-sitemap"></i>
						
						 <a class="label" href="http://shevaxu.github.io/categories/Development">Development</a>  <a class="label" href="http://shevaxu.github.io/categories/Apps">Apps</a> 
						
						
						&nbsp; &nbsp; 
						<i class="fa fa-tags"></i>
						
						 <a class="label" href="http://shevaxu.github.io/tags/Maps">Maps</a>  <a class="label" href="http://shevaxu.github.io/tags/Visualization">Visualization</a>  <a class="label" href="http://shevaxu.github.io/tags/D3.js">D3.js</a> 
						
					</span>
					
				</div>
			</div>
		</div>
	</div>
</header>

<article>
	<div class="container">
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
				

<p>I like travel.</p>

<p>I always wanted an app to help me memorize all the extradinary experiences in every journey. There are plenty of travalling apps on the web but none of them match my imagination so far (yeah, I&rsquo;m that picky). So why not develop one myself?</p>

<blockquote>
<p>It is good to have an end to journey toward; but it is the journey that matters, in the end.</p>

<p>&ndash; Ernest Hemingway</p>
</blockquote>

<h2 id="toc_0">D3.js &amp; My Footprint Map</h2>

<p>The first thing I tried was <a href="http://d3js.org/"><em>D3.js</em></a>, which is for <em>Data-driven documents</em>. Its capability is far beyond making a map, and I have just explored the very little part of it. Mastering such a comprehensive tool would require so much effort, and I&rsquo;m glad that I began learning it with a certain project idea in mind that offered extra motivation. The map I was going to make is my footprint of provinces in China.</p>

<p>The idea came from an image I saw on <a href="http://couchsurfing.org/"><em>Couchsurfing</em></a> for someone&rsquo;s visited countires (like <a href="http://traveltip.org/countries_visited.php">this</a>). I have not explored many countries yet so I wanted to make one for visited provinces in China. I found <a href="http://blog.econst.org/2014/06/02/china-map-with-d3-js-and-geojson/">one with similar idea</a> but it possesses no interaction I desire (but it gave me inspiration and data).</p>

<p>My final map/app came out like this:</p>

<p><a href="../../playground/footprint-map.html" target="_blank">
<img src="../../img/my-footprint.png" width=100%>
</a></p>

<ol>
<li>It visualizes both the provinces and cities borders;</li>
<li>you can pick your marking color for each provinces independently (according to your own logic);</li>
<li>you can save it to .png image.</li>
</ol>

<p>You can try making your own footprint map (by clicking the image or go to the <em>Playgournd</em>) and share it. Below are the key steps/obstacles during my development that would help in case you want to customize your own map for another country or the world.</p>

<h3 id="toc_1">The magic of D3.js</h3>

<p>The data model confused me until I found the story of <a href="http://bost.ocks.org/mike/circles/"><em>Three Little Circle</em></a> by Mike Bostock, one of the author of D3.js. He also wrote a detail post about <a href="http://bost.ocks.org/mike/selection/"><em>How Selections Work</em></a> that I plan to take time reading/understanding in the future.</p>

<h3 id="toc_2">Data &amp; TopoJSON</h3>

<p>The provinces/cities data I got was originally in <a href="http://geojson.org/"><em>GeoJSON</em></a> format, a subset of <a href="http://www.json.org/"><em>JavaScript Object Notation</em></a> for geographic data. I converted it to <a href="https://github.com/mbostock/topojson/wiki"><em>TopoJSON</em></a> using <a href="http://geojson.io/"><em>geojson.io</em></a> (it&rsquo;s actually a great online map data editor), mainly for smaller file size and faster rendering (but it requires additional <em>topojson.js</em> and GeoJSON is more widely supported).</p>

<p><em>P.S.</em> This project also help me pick up some geographic knowledge, e.g., the different map <a href="http://techslides.com/demos/d3/d3-continents-projections.html">projections</a> (and <em>Mercator</em> is the one I use).</p>

<h3 id="toc_3">Colors &amp; JSColor</h3>

<p>I give each province a &ldquo;checked&rdquo; attribute that filling the path with default color when off and filling with the color I choose when on. <a href="http://jscolor.com/"><em>JSColor</em></a> is so handy as a color picker. After all, each color can be represented as a string like <em>&rdquo;#fff&rdquo;</em> or <em>&rdquo;#D2E4B4&rdquo;</em>.</p>

<h3 id="toc_4">Image &amp; SaveSvgAsPng</h3>

<p>It took me few days to figure out how to save the rendered svg (that&rsquo;s what D3.js draws for geo-paths) to image, which is important for a closure since I don&rsquo;t want to <em>screenshot my work</em>. Mike also wrote a post about <a href="http://bl.ocks.org/biovisualize/8187844">direct conversion on Chrome</a> but I found <a href="https://github.com/exupero/saveSvgAsPng">saveSvgAsPng</a> more easy to use (and at least supports Safari as well). There&rsquo;s a <a href="http://spin.atomicobject.com/2014/01/21/convert-svg-to-png/">blog post</a> explains how it works (the key is to convert it to a data URL and go get it).</p>

<h2 id="toc_5">Leaflet</h2>

			</div>
		</div>
		
	</div>
</article>






<footer>
	<div class="container">
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
				<ul class="list-inline text-center">
					
					<li>
						<a target="_blank" href=https://github.com/ShevaXu>
							<span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
						</a>
					</li>
					  
					<li>
						<div class="copyright text-muted">Powered by
							<a target="_blank" href="http://gohugo.io">
								<img src="http://shevaxu.github.io/img/hugo44.ico" />
							</a>
						</div>
					</li>
				</ul>
				<p class="copyright text-muted">Copyright &copy; Sheva Xu 2014-2015</p>
			</div>
		</div>
	</div>
</footer>

	
	
	<a class="back-to-top">
		<i class="fa fa-chevron-circle-up fa-5x fa-square"></i>
	</a>
	
	
	<script src="http://shevaxu.github.io/js/jquery-2.1.3.min.js"></script>	
	
	<script src="http://shevaxu.github.io/js/bootstrap.min.js"></script>
	
	<script src="http://shevaxu.github.io/js/clean-blog.min.js"></script>
	
	
	<script src="http://shevaxu.github.io/js/highlight.pack.js"></script>
	<script>
		hljs.initHighlightingOnLoad();
	</script>
	
	
	<script>
		$(document).ready(function() {
			var offset = 220;
			var duration = 500;
			$(window).scroll(function() {
				if ($(this).scrollTop() > offset) {
					$(".back-to-top").fadeIn(duration);
				} else {
					$(".back-to-top").fadeOut(duration);
				}
			});
		
			$(".back-to-top").click(function(event) {
				event.preventDefault();
				$("html, body").animate({scrollTop: 0}, duration);
				return false;
			})
		});
	</script>

</body>

</html>
